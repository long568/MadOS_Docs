(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{192:function(s,t,a){s.exports=a.p+"assets/img/FirstCode.2789bd71.png"},193:function(s,t,a){s.exports=a.p+"assets/img/HWConnection.bed2b9ec.jpeg"},194:function(s,t,a){s.exports=a.p+"assets/img/StartDebug.bfb73ab6.png"},195:function(s,t,a){s.exports=a.p+"assets/img/Debugging.5d34cc26.png"},196:function(s,t){s.exports="data:image/png;base64,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"},197:function(s,t,a){s.exports=a.p+"assets/media/Flashing.40f54502.mp4"},222:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"初识源码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初识源码","aria-hidden":"true"}},[s._v("#")]),s._v(" 初识源码")]),s._v(" "),n("h2",{attrs:{id:"获取源码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取源码","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取源码")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/long568/MadOS",target:"_blank",rel:"noopener noreferrer"}},[s._v("MadOS 源码仓库"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[s._v("初学者请选择master分支， 产品应用可选择经过严格验证的release版本。")])]),s._v(" "),n("h2",{attrs:{id:"展开源码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#展开源码","aria-hidden":"true"}},[s._v("#")]),s._v(" 展开源码")]),s._v(" "),n("p",[s._v("将 "),n("strong",[s._v("MadOS")]),s._v(" 文件夹拖入 "),n("strong",[s._v("VSCode")]),s._v(" 中:\n"),n("img",{attrs:{src:a(192),alt:"First Code"}})]),s._v(" "),n("h3",{attrs:{id:"目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目录结构","aria-hidden":"true"}},[s._v("#")]),s._v(" 目录结构")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发者无需关心的内容以 n 标记。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发者可以参考的内容以 - 标记。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发者需要关心的内容以 y 标记。")]),s._v("\nMadOS\n├─ .vscode/        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : VSCode 相关配置")]),s._v("\n├─ app/            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# y : 项目源码(其中每个子目录为一个项目)")]),s._v("\n│  ├─ backup       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 旧版MadOS中的工程备份。")]),s._v("\n│  ├─ lesson001/   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - : MadOS应用教程第一课，稍后我们会展开分析它。")]),s._v("\n│  ├─ LoKernel/    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : MadOS内核压力测试。")]),s._v("\n│  ├─ LoNode/      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - : LoBoard开发板配套例程，不断完善中。")]),s._v("\n│  └─ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - : 未来，我们将开放更多示例供开发者参考。")]),s._v("\n├─ arch/           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : MCU架构相关源码")]),s._v("\n├─ build/          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 编译过程文件存放处(源码编译时自动生成)")]),s._v("\n├─ device/         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 设备模块源码")]),s._v("\n├─ driver/         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 驱动源码")]),s._v("\n├─ kernel/         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 内核源码")]),s._v("\n├─ library/        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 第三方库源码")]),s._v("\n├─ tools/          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : MadOS环境配置相关工具")]),s._v("\n├─ .gitattributes  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : git属性文件")]),s._v("\n├─ .gitignore      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : git过滤文件")]),s._v("\n├─ app_switcher.sh "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# y : 工作App切换器，详见后述。")]),s._v("\n├─ elibs.mk        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 第三方库配置")]),s._v("\n├─ LICENSE         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 许可证")]),s._v("\n├─ main.mk         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 真实主编译文件(临时生成)")]),s._v("\n├─ Makefile        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 影子主编译文件")]),s._v("\n└─ rules.mk        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# n : 编译规则定义")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("div",{staticClass:"tip custom-block"},[n("ul",[n("li",[s._v("如果您是操作系统爱好者，也许对 "),n("strong",[s._v("arch、kernel、device、driver")]),s._v(" 中的内容会感兴趣。")]),s._v(" "),n("li",[s._v("如果您是初学者、开发者，则只需关心 "),n("strong",[s._v("app")]),s._v(" ，即您的项目源码，以便快速实现想法。")]),s._v(" "),n("li",[s._v("MadOS尚未包含某些驱动或第三方库，如有需要，您可:\n"),n("ul",[n("li",[s._v("联系 "),n("router-link",{attrs:{to:"/Story/"}},[s._v("我们")]),s._v(" 进行添加")],1),s._v(" "),n("li",[s._v("访问 "),n("a",{attrs:{href:"http://club.digiic.com/Forum/PostIndex/s-72.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("社区"),n("OutboundLink")],1),s._v(" 搜索一下\n")])])])])]),s._v(" "),n("h2",{attrs:{id:"切换项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#切换项目","aria-hidden":"true"}},[s._v("#")]),s._v(" 切换项目")]),s._v(" "),n("p",[s._v("在 "),n("strong",[s._v("MadOS")]),s._v(" 根目录下有名为 "),n("strong",[s._v("app_switcher.sh")]),s._v(" 的脚本，用以切换当前工作项目:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# export MADOS_WORKING_APP=LoKernel")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# export MADOS_WORKING_APP=LoNode")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("export")]),s._v(" MADOS_WORKING_APP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("lesson001\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("将 "),n("strong",[s._v("lesson001")]),s._v(" 前的注释去掉，并注释余项目，然后在"),n("strong",[s._v("VSCode")]),s._v("中运行 "),n("strong",[s._v("config")]),s._v(" 任务：")]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[s._v("终端 -> 运行任务 -> config")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("MadOS is ready"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". Enjoy yourself"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("h2",{attrs:{id:"项目结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目结构","aria-hidden":"true"}},[s._v("#")]),s._v(" 项目结构")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("lesson001\n├─ CfgApp.mk "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目配置")]),s._v("\n├─ CfgDevs.c "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设备列表")]),s._v("\n├─ CfgUser.h "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户配置")]),s._v("\n├─ main.c    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工程源码(主文件)")]),s._v("\n└─ Makefile  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译文件")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"tip custom-block"},[n("ul",[n("li",[s._v("如果您是初学者、开发者，只需关心 "),n("strong",[s._v("main.c")]),s._v(" ，即您的项目源码，以便快速实现想法。")]),s._v(" "),n("li",[s._v("为便于后续学习，我们依然对每个文件进行初步介绍，您可快速浏览，以备不时之需。")])])]),s._v(" "),n("h3",{attrs:{id:"cfgapp-mk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cfgapp-mk","aria-hidden":"true"}},[s._v("#")]),s._v(" CfgApp.mk")]),s._v(" "),n("div",{staticClass:"language-makefile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-makefile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MCU架构配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" MCU_ARCH     "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" armv7-m\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" MCU_VER      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cortex-m3\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" MCU_PREFIX   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stm32f10x\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" MCU_SUFFIX   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cl\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" MCU_RAM_SIZE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x10000\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" MCU_FLS_SIZE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 256K\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工程特定编译选项")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" PRJ_CFLAGS  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" -Os\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" PRJ_LDFLAGS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" --specs"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nano.specs\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h3",{attrs:{id:"cfgdevs-c"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cfgdevs-c","aria-hidden":"true"}},[s._v("#")]),s._v(" CfgDevs.c")]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 第一课中未启用任何设备，设备列表为空。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[s._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MadDev.h"')])]),s._v("\nMadDev_t "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("DevsList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    MAD_DEVP_END\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"cfguser-h"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cfguser-h","aria-hidden":"true"}},[s._v("#")]),s._v(" CfgUser.h")]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// MadOS支持最大256个任务优先级，数字越大优先级越低。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开发者需根据自身需要进行配置，并避开MadOS内部已使用的优先级。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 最低优先级为空闲线程使用，次低优先级为统计线程(可选)使用，另建议保留优先级 0。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   THREAD_PRIO_SYS_RUNNING "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 标记系统正在运行的线程(周期性闪烁Led)")]),s._v("\n   THREAD_PRIO_DRIVER_ETH        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编译网络驱动层所需")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通常，中断优先级都与驱动相关。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 中断优先级统一于此处枚举，便于高级开发者查阅、更改。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 优先级1、15为MadOS内部保留，其余优先级可供项目使用。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ISR_PRIO_SYSTICK    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ISR_PRIO_ARCH_MEM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ISR_PRIO_DISK"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tISR_PRIO_ETH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ISR_PRIO_DEV_USART"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ISR_PRIO_TTY_USART"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ISR_PRIO_PENDSV     "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 堆空间定义(硬件相关)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[s._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" MAD_OS_STACK_SIZE (56 * 1024)")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h3",{attrs:{id:"makefile"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#makefile","aria-hidden":"true"}},[s._v("#")]),s._v(" Makefile")]),s._v(" "),n("div",{staticClass:"language-makefile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-makefile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将项目路径下所有.c文件输入编译系统。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" TEMP "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BUILD_DIR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/app\nASMS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nSRCS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wildcard")]),s._v(" *.c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RULES"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("after_all")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LD"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wildcard")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BUILD_DIR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/app/*.o"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LDFLAGS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -o "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TARGET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".elf\n\t"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OCPY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -O ihex "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TARGET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".elf "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TARGET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".hex\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"main-c"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#main-c","aria-hidden":"true"}},[s._v("#")]),s._v(" main.c")]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token macro property"}},[s._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MadOS.h"')]),s._v("   ")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// MadOS核心头文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[s._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CfgUser.h"')]),s._v(" ")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户配置头文件")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 运行时堆栈 (8Bytes-Align for Float)")]),s._v("\nMadAligned_t MadStack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MAD_OS_STACK_SIZE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" MAD_MEM_ALIGN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 函数声明")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madStartup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MadVptr exData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("   \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 线程")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madStartup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MadVptr exData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h4",{attrs:{id:"运行时堆栈"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行时堆栈","aria-hidden":"true"}},[s._v("#")]),s._v(" 运行时堆栈")]),s._v(" "),n("p",[s._v("运行时堆栈的空间由硬件决定。"),n("br"),s._v("\n任何项目的运行时堆栈皆可由下式定义:")]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[s._v("MadAligned_t MadStack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MAD_OS_STACK_SIZE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" MAD_MEM_ALIGN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"初始化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化","aria-hidden":"true"}},[s._v("#")]),s._v(" 初始化")]),s._v(" "),n("p",[s._v("下述初始化流程可适用于任何项目。"),n("br"),s._v("\n启动MadOS后，程序会跳转至新建线程中运行。"),n("br"),s._v("\n第一课中，我们只建立一个线程，意在简明，线程优先级取 0。")]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madCopyVectorTab")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将中断向量表复制到RAM中")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madOSInit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MadStack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MAD_OS_STACK_SIZE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// MadOS初始化")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madThreadCreate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("madStartup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MAD_OS_STACK_SIZE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 新建线程")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madOSRun")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 启动MadOS")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// !永远不该运行至此!")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 以上是MadOS的启动过程，初学者不必深究，随后的学习中会逐步了解其原理")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h4",{attrs:{id:"线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#线程","aria-hidden":"true"}},[s._v("#")]),s._v(" 线程")]),s._v(" "),n("p",[s._v("开发者在线程中实现想法，每个线程都是一个无限循环。")]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[s._v("使用线程管理API，可以新建、挂起、恢复、删除线程。")])]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madStartup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MadVptr exData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    GPIO_InitTypeDef pin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// GPIO临时变量")]),s._v("\n    MadBool flag "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MFALSE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// LED状态标志")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("exData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 防止编译器产生警告")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化GPIOE-1，用于控制LED开关。")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("RCC_APB2PeriphClockCmd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RCC_APB2Periph_GPIOE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ENABLE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    pin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("GPIO_Mode  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" GPIO_Mode_Out_PP"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\tpin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("GPIO_Pin   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" GPIO_Pin_1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\tpin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("GPIO_Speed "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" GPIO_Speed_50MHz"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("GPIO_Init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GPIOE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("pin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化SysTick，脉动间隔1ms。")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madInitSysTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DEF_SYS_TICK_FREQ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" DEF_TICKS_PER_SEC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 线程主循环")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madTimeDly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 延时500ms")]),s._v("\n        flag "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// LED状态取反")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("GPIO_ResetBits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GPIOE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" GPIO_Pin_1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开灯")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("GPIO_SetBits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GPIOE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" GPIO_Pin_1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 关灯")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("div",{staticClass:"tip custom-block"},[n("ul",[n("li",[s._v("无OS环境，通常使用空循环方式延时:\n"),n("ul",[n("li",[s._v("无法精准延时")]),s._v(" "),n("li",[s._v("大量浪费MCU时间")])])])]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("MadOS环境，"),n("strong",[s._v("SysTick")]),s._v(" 初始化后提供了精准的"),n("strong",[s._v("心跳")]),s._v("，根据"),n("strong",[s._v("心跳")]),s._v("的频率可得精准延时。\n"),n("ul",[n("li",[s._v("运行30天，实测误差小于1微秒("),n("span",{staticClass:"katex"},[n("span",{staticClass:"katex-mathml"},[n("math",[n("semantics",[n("mrow",[n("mn",[s._v("1")]),n("mi",[s._v("u")]),n("mi",[s._v("s")]),n("mo",[s._v("=")]),n("mn",[s._v("1")]),n("msup",[n("mn",[s._v("0")]),n("mrow",[n("mo",[s._v("−")]),n("mn",[s._v("6")])],1)],1),n("mi",[s._v("s")])],1),n("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("1 us = 10^{-6} s")])],1)],1)],1),n("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),n("span",{staticClass:"mord"},[s._v("1")]),n("span",{staticClass:"mord mathdefault"},[s._v("u")]),n("span",{staticClass:"mord mathdefault"},[s._v("s")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),n("span",{staticClass:"mrel"},[s._v("=")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.8141079999999999em","vertical-align":"0em"}}),n("span",{staticClass:"mord"},[s._v("1")]),n("span",{staticClass:"mord"},[n("span",{staticClass:"mord"},[s._v("0")]),n("span",{staticClass:"msupsub"},[n("span",{staticClass:"vlist-t"},[n("span",{staticClass:"vlist-r"},[n("span",{staticClass:"vlist",staticStyle:{height:"0.8141079999999999em"}},[n("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[n("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),n("span",{staticClass:"sizing reset-size6 size3 mtight"},[n("span",{staticClass:"mord mtight"},[n("span",{staticClass:"mord mtight"},[s._v("−")]),n("span",{staticClass:"mord mtight"},[s._v("6")])])])])])])])])]),n("span",{staticClass:"mord mathdefault"},[s._v("s")])])])]),s._v(")")])])])]),s._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("madTimeDly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通常，madTimeDly以ms为单位。")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("h2",{attrs:{id:"编译项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编译项目","aria-hidden":"true"}},[s._v("#")]),s._v(" 编译项目")]),s._v(" "),n("h3",{attrs:{id:"首次编译"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#首次编译","aria-hidden":"true"}},[s._v("#")]),s._v(" 首次编译")]),s._v(" "),n("p",[s._v("在VSCode中运行 "),n("strong",[s._v("rebuild")]),s._v(" 任务")]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[s._v("终端 -> 运行任务 -> rebuild")])]),s._v(" "),n("h3",{attrs:{id:"普通编译"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#普通编译","aria-hidden":"true"}},[s._v("#")]),s._v(" 普通编译")]),s._v(" "),n("p",[s._v("在VSCode中运行 "),n("strong",[s._v("build")]),s._v(" 任务")]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[s._v("终端 -> 运行任务 -> build")])]),s._v(" "),n("h3",{attrs:{id:"编译结果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编译结果","aria-hidden":"true"}},[s._v("#")]),s._v(" 编译结果")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nBuilding "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". Done.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("编译成功后，MadOS根目录下会生成 "),n("strong",[s._v("build")]),s._v(" 文件夹：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("build\n├─ app/         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 存放项目相关编译过程文件")]),s._v("\n├─ arch/        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 存放芯片相关编译过程文件")]),s._v("\n├─ dev/         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 存放设备相关编译过程文件")]),s._v("\n├─ drv/         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 存放驱动相关编译过程文件")]),s._v("\n├─ kernel/      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 存放内核相关编译过程文件")]),s._v("\n├─ HiMadOS.elf  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 调试文件")]),s._v("\n├─ HiMadOS.hex  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 烧录文件")]),s._v("\n├─ HiMadOS.ld   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 链接脚本")]),s._v("\n├─ libarch.a    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 芯片库文件")]),s._v("\n├─ libdev.a     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设备库文件")]),s._v("\n├─ libdrv.a     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 驱动库文件")]),s._v("\n└─ libkernel.a  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 内核库文件")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("div",{staticClass:"tip custom-block"},[n("p",[n("strong",[s._v("build")]),s._v(" 内生成的目录 / 文件与项目配置有关，开发者无需关心。")])]),s._v(" "),n("h2",{attrs:{id:"调试项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#调试项目","aria-hidden":"true"}},[s._v("#")]),s._v(" 调试项目")]),s._v(" "),n("p",[s._v("将 "),n("strong",[s._v("STLink")]),s._v(" 分别与 "),n("strong",[s._v("LoBoard")]),s._v("(开发板)、电脑连接，并给 "),n("strong",[s._v("LoBoard")]),s._v(" 通电:"),n("br"),s._v(" "),n("img",{attrs:{src:a(193),alt:"Hardware Connection"}})]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("ul",[n("li",[s._v("MacOSX / Ubuntu 需安装 "),n("strong",[s._v("libusb")]),s._v(" 。")]),s._v(" "),n("li",[s._v("Windows 需安装 "),n("strong",[s._v("ST")]),s._v(" 官方提供的"),n("a",{attrs:{href:"https://www.st.com/content/st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-link009.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("STLink驱动"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("li",[s._v("如果您需要购买 "),n("strong",[s._v("STLink")]),s._v(" 或 "),n("strong",[s._v("LoBoard")]),s._v(" ，请移步至我们的"),n("a",{attrs:{href:"https://shop108272841.taobao.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("小店"),n("OutboundLink")],1),s._v("。")])])]),s._v(" "),n("p",[s._v("在 "),n("strong",[s._v("VSCode")]),s._v(" 中启动调试:"),n("br"),s._v(" "),n("img",{attrs:{src:a(194),alt:"Start Debug"}}),n("br"),s._v("\n正常启动调试后，程序会暂停在 "),n("strong",[s._v("main")]),s._v(" 函数起始位置:\n"),n("img",{attrs:{src:a(195),alt:"Debugging"}})]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[s._v("按 "),n("strong",[s._v("F5")]),s._v(" 或 点击调试工具栏中的 "),n("strong",[s._v("继续")]),s._v(" 按钮，程序继续执行。"),n("br"),s._v(" "),n("img",{attrs:{src:a(196),alt:"DebugTools"}})])]),s._v(" "),n("p",[n("video",{attrs:{id:"video",controls:"",preload:"none",poster:"http://om2bks7xs.bkt.clouddn.com/2017-08-26-Markdown-Advance-Video.jpg"}},[n("source",{attrs:{id:"mp4",src:a(197),type:"video/mp4"}})])])])},[],!1,null,null,null);t.default=e.exports}}]);